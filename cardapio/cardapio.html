<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Card√°pio ‚Ä¢ Demo</title>
  <style>
    :root {
      --bg: #000000;
      --panel: #14182b;
      --panel-2: #1a1f36;
      --accent: #000000;
      --accent-2: #000000;
      --text: #e6e9f2;
      --muted: #aab1c6;
      --danger: #ff6b6b;
      --success: #34d399;
      --shadow: 0 10px 30px rgba(0,0,0,.35);
      --radius: 16px;
    }
    * { box-sizing: border-box; }
    html, body { height: 100%; }
    body {
      margin: 0; font-family: ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, "Helvetica Neue", Arial;
      background: radial-gradient(1200px 800px at 10% -10%, #1b2140 0%, var(--bg) 40%), var(--bg);
      color: var(--text);
    }
    a { color: inherit; }
    .container { max-width: 1200px; margin: 0 auto; padding: 24px; }
    header {
      position: sticky; top: 0; z-index: 50;
      backdrop-filter: saturate(1.2) blur(10px);
      background: linear-gradient(180deg, rgba(20,24,43,.9), rgba(20,24,43,.6));
      border-bottom: 1px solid rgba(167,139,250,.18);
    }
    .nav {
      display: grid; grid-template-columns: 1fr auto 480px; gap: 16px; align-items: center; padding: 16px 24px;
    }
    .brand { display: flex; align-items: center; gap: 12px; font-weight: 800; letter-spacing:.3px; }
    .brand .logo { width: 36px; height: 36px; border-radius: 10px; background: linear-gradient(135deg, var(--accent), var(--accent-2)); box-shadow: var(--shadow); display:grid;place-items:center; font-weight:900; }

    .status { display: flex; align-items: center; gap: 10px; justify-content: center; }
    .badge { padding: 6px 10px; border-radius: 999px; font-size: 12px; font-weight: 700; letter-spacing:.3px; }
    .badge.open { background: rgba(52,211,153,.15); color: var(--success); border:1px solid rgba(52,211,153,.35); }
    .badge.closed { background: rgba(255,107,107,.15); color: var(--danger); border:1px solid rgba(255,107,107,.35); }

    .controls { display: flex; gap: 10px; align-items: center; justify-content: flex-end; flex-wrap: wrap; }
    .select, .input {
      background: var(--panel-2); color: var(--text); border:1px solid rgba(167,139,250,.15);
      border-radius: 12px; padding: 10px 12px; outline: none; min-width: 160px;
    }
    .input[type="time"] { min-width: 120px; }
    .btn {
      background: linear-gradient(135deg, var(--accent), var(--accent-2));
      color: white; border: none; padding: 10px 14px; border-radius: 12px; font-weight: 700; cursor: pointer;
      box-shadow: var(--shadow);
    }
    .btn.secondary { background: none; border:1px solid rgba(167,139,250,.35); color: var(--text); box-shadow: none; }
    .btn:disabled { opacity:.6; cursor:not-allowed; }

    .layout { display: grid; grid-template-columns: 1fr 370px; gap: 22px; padding: 24px; }
    .panel { background: linear-gradient(180deg, var(--panel), rgba(20,24,43,.8)); border:1px solid rgba(167,139,250,.12); border-radius: var(--radius); box-shadow: var(--shadow); }

    .filters { display:flex; gap: 10px; padding: 16px; border-bottom: 1px solid rgba(167,139,250,.12); flex-wrap: wrap; }
    .chip { padding: 8px 12px; border-radius: 999px; background: rgba(167,139,250,.15); border:1px solid rgba(167,139,250,.25); cursor:pointer; font-weight:600; }
    .chip.active { background: linear-gradient(135deg, var(--accent), var(--accent-2)); color: white; border-color: transparent; }

    .menu { display:grid; grid-template-columns: repeat(auto-fill, minmax(220px,1fr)); gap: 14px; padding: 16px; }
    .card { background: var(--panel-2); border:1px solid rgba(167,139,250,.12); border-radius: 18px; overflow: hidden; display:flex; flex-direction:column; }
    .thumb { height: 140px; background: #0f1326; display:grid; place-items:center; font-size: 32px; overflow:hidden; }
    .thumb img { width:100%; height:100%; object-fit:cover; display:block; }
    .card-body { padding: 12px; display:flex; flex-direction:column; gap:8px; }
    .title { font-weight: 800; }
    .desc { color: var(--muted); font-size: 14px; min-height: 40px; }
    .price { font-weight: 800; }
    .qty { display:flex; align-items:center; gap:8px; }
    .step { background: none; border:1px solid rgba(18, 0, 71, 0.35); color: var(--text); width:28px; height:28px; border-radius: 8px; font-weight:900; display:grid; place-items:center; cursor:pointer; }

    .cart { position: sticky; top: 100px; padding: 16px; display:flex; flex-direction:column; gap:12px; }
    .cart-title { font-size: 18px; font-weight: 800; display:flex; align-items:center; justify-content: space-between; }
    .cart-list { display:flex; flex-direction:column; gap:10px; max-height: 50vh; overflow:auto; }
    .cart-item { display:grid; grid-template-columns: 1fr auto auto; gap:8px; align-items:center; background: rgba(167,139,250,.06); padding:10px; border-radius:12px; }
    .remove { background:none; border:none; color: var(--danger); cursor:pointer; font-weight:800; }
    .totals { margin-top: 6px; border-top:1px dashed rgba(19, 1, 73, 0.25); padding-top:10px; display:flex; flex-direction:column; gap:6px; }

    .footer-note { color: var(--muted); font-size: 13px; }

    #pixCode { width: 100%; border-radius: 12px; padding: 8px; background: var(--panel-2); border:1px solid rgba(167,139,250,.15); color: var(--text); resize:none; height: 60px; }
    
    @media (max-width: 980px) { .nav { grid-template-columns: 1fr; gap: 10px; } .layout { grid-template-columns: 1fr; } .cart { position: static; } }
  </style>
</head>
<body>
  <header>
    <div class="nav">
      <div class="brand">
        <div class="logo">üçî</div>
        <div>
          <div style="font-size:18px; line-height:1;">Requinte Bar e cozinha</div>
          <small style="color:var(--muted)">Card√°pio online</small>
        </div>
      </div>
      <div class="status">
        <span id="openBadge" class="badge">Carregando‚Ä¶</span>
        <span id="hoursText" class="footer-note"></span>
      </div>
      <div class="controls">
        <select id="locationSelect" class="select">
          <option value="RETIRADA">Retirada no balc√£o</option>
          <option value="Bairro Santa In√™s">Bairro Santa In√™s</option>
          <option value="Centro">Centro</option>
          <option value="Bairro Cristo Rei">Bairro Cristo Rei</option>
          <option value="Bairro Portal Do Sol">Bairro Portal Do Sol</option>
          <option value="Bairro Tr√™s Pinheiros">Bairro Tr√™s Pinheiros</option>
        </select>
        <input id="addressInput" class="input" placeholder="Endere√ßo (de entrega)" />
        <input id="timeInput" type="time" class="input" />
        <select id="paymentSelect" class="select">
          <option value="Dinheiro">Dinheiro</option>
          <option value="Pix">Pix</option>
          <option value="Cart√£o">Cart√£o</option>
        </select>
        <input id="trocoInput" class="input" placeholder="Troco para quanto?" style="display:none;" />
        <textarea id="pixCode" readonly placeholder="C√≥digo Pix" style="display:none;"></textarea>
        <button id="copyPixBtn" class="btn secondary" style="display:none;margin-top:4px;">Copiar Pix</button>
        <button id="clearBtn" class="btn secondary">Limpar</button>
      </div>
    </div>
  </header>

  <main class="container">
    <div class="layout">
      <section class="panel">
        <div class="filters" id="filters"></div>
        <div class="menu" id="menu"></div>
      </section>
      <aside class="panel cart">
        <div class="cart-title">
          <span>Carrinho</span>
          <button id="emptyBtn" class="btn secondary" style="padding:6px 10px">Esvaziar</button>
        </div>
        <div class="cart-list" id="cartList"></div>
        <div class="totals">
          <div style="display:flex; justify-content:space-between"><span>Subtotal</span><strong id="subtotal">R$ 0,00</strong></div>
          <div style="display:flex; justify-content:space-between"><span>Entrega</span><strong id="delivery">R$ 0,00</strong></div>
          <div style="display:flex; justify-content:space-between; font-size:18px"><span>Total</span><strong id="total">R$ 0,00</strong></div>
          <button id="checkoutBtn" class="btn">Finalizar pedido</button>
          <small class="footer-note">Pedidos s√≥ podem ser finalizados dentro do hor√°rio de atendimento.</small>
        </div>
      </aside>
    </div>
  </main>

  <script>
  const BRL = new Intl.NumberFormat('pt-BR', { style: 'currency', currency: 'BRL' });

  const PRODUCTS = [
    { id: 1, name: 'Duplo Bacon Cheddar', price: 28.0, category: 'Burgers', desc: 'P√£o brioche, 2x hamburger, queijo cheddar, queijo prato', img: 'https://brazzabnu.chefware.com.br/175/0/0/cheddar-amp--bacon-duplo-2-carnes.jpg' },
    { id: 2, name: 'X-Tudo', price: 25.0, category: 'Burgers', desc: 'Dois discos 100 g, cheddar cremoso, cebola', img: 'https://instadelivery-public.nyc3.cdn.digitaloceanspaces.com/groups/172304842966b3a1edd5564.jpeg' },
    { id: 3, name: 'Por√ß√£o Peixe + Fritas', price: 60.5, category: 'Por√ß√µes', desc: '500g de fil√© de til√°pia, 500g de batata frita', img: 'https://img.freepik.com/fotos-premium/isca-de-peixe-com-batatas-fritas_538646-12784.jpg' },
    { id: 4, name: 'Batata Crinkle', price: 12.9, category: 'Acompanhamentos', desc: 'Crocante por fora, macia por dentro', img: 'https://media.istockphoto.com/id/466762504/pt/foto/saud%C3%A1vel-crinkle-assado-batatas-fritas.jpg?s=612x612&w=0&k=20&c=cqQ9pVRyaXi74qy-DgElR6-mCHzy4zurZ8gYjg42ghs=' },
    { id: 5, name: 'Onion Rings', price: 14.9, category: 'Acompanhamentos', desc: 'An√©is dourados com leve pic√¢ncia', img: 'https://via.placeholder.com/300' },
    { id: 6, name: 'Refrigerante Lata', price: 6.5, category: 'Bebidas', desc: '350 ml', img: 'https://s3-sa-east-1.amazonaws.com/deliveryon-uploads/products/sabordabarrafit/36_62b09af6e68a8.png' },
    { id: 7, name: 'Milkshake', price: 16.9, category: 'Bebidas', desc: 'Baunilha ou chocolate', img: 'https://via.placeholder.com/300' },
    { id: 8, name: 'Brownie da Casa', price: 11.9, category: 'Sobremesas', desc: 'Com casquinha crocante', img: 'https://via.placeholder.com/300' },
  ];

  const DELIVERY_FEES = {
    "RETIRADA": 0,
    "Bairro Santa In√™s": 6,
    "Centro": 5,
    "Bairro Cristo Rei": 7,
    "Bairro Portal Do Sol": 8,
    "Bairro Tr√™s Pinheiros": 7,
  };

  const state = {
    filter: 'Todos',
    cart: JSON.parse(localStorage.getItem('cart') || '{}'),
    location: localStorage.getItem('location') || 'RETIRADA',
    address: localStorage.getItem('address') || '',
    time: localStorage.getItem('time') || '',
    payment: localStorage.getItem('payment') || 'Dinheiro',
    troco: localStorage.getItem('troco') || '',
  };

  const qs = (s, el = document) => el.querySelector(s);
  const qsa = (s, el = document) => [...el.querySelectorAll(s)];
  const byId = (id) => PRODUCTS.find(p => p.id === id);
  const money = (n) => BRL.format(n);

  function saveState() {
    localStorage.setItem('cart', JSON.stringify(state.cart));
    localStorage.setItem('location', state.location);
    localStorage.setItem('address', state.address);
    localStorage.setItem('time', state.time);
    localStorage.setItem('payment', state.payment);
    localStorage.setItem('troco', state.troco);
  }

  function renderFilters() {
    const categories = ['Todos', ...new Set(PRODUCTS.map(p => p.category))];
    qs('#filters').innerHTML = categories.map(cat => 
      `<button class="chip${state.filter === cat ? ' active' : ''}" data-cat="${cat}">${cat}</button>`
    ).join('');
    qsa('.chip').forEach(b => b.onclick = () => {
      state.filter = b.dataset.cat; renderMenu();
      qsa('.chip').forEach(c => c.classList.remove('active'));
      b.classList.add('active');
    });
  }

  function renderMenu() {
    const list = state.filter === 'Todos' ? PRODUCTS : PRODUCTS.filter(p => p.category === state.filter);
    const el = qs('#menu');
    el.innerHTML = '';
    list.forEach(p => {
      const card = document.createElement('article');
      card.className = 'card';
      card.innerHTML = `
        <div class="thumb"><img src="${p.img}" alt="${p.name}" /></div>
        <div class="card-body">
          <div class="title">${p.name}</div>
          <div class="desc">${p.desc}</div>
          <div style="display:flex; align-items:center; justify-content:space-between;">
            <div class="price">${money(p.price)}</div>
            <div class="qty">
              <button class="step" data-step="-1">‚àí</button>
              <input type="number" min="0" value="${state.cart[p.id] || 0}" style="width:48px; text-align:center;" />
              <button class="step" data-step="1">+</button>
            </div>
          </div>
          <button class="btn" style="margin-top:8px; width:100%">Adicionar</button>
        </div>`;
      const [minus, qtyInput, plus] = card.querySelectorAll('.step, input');
      minus.onclick = () => { qtyInput.value = Math.max(0, (parseInt(qtyInput.value||'0',10) - 1)); };
      plus.onclick = () => { qtyInput.value = (parseInt(qtyInput.value||'0',10) + 1); };
      card.querySelector('.btn').onclick = () => {
        const qty = Math.max(0, parseInt(qtyInput.value||'0',10));
        if (qty === 0) return;
        state.cart[p.id] = (state.cart[p.id]||0) + qty;
        qtyInput.value = 0;
        saveState();
        renderCart();
      };
      el.appendChild(card);
    });
  }

  function renderCart() {
    const list = qs('#cartList');
    list.innerHTML = '';
    Object.entries(state.cart).forEach(([id, qty]) => {
      const product = byId(Number(id));
      if (!product) return;
      const row = document.createElement('div');
      row.className = 'cart-item';
      row.innerHTML = `
        <span>${qty}√ó ${product.name}</span>
        <span>${money(product.price * qty)}</span>
        <button class="remove">√ó</button>`;
      row.querySelector('.remove').onclick = () => {
        delete state.cart[id]; saveState(); renderCart();
      };
      list.appendChild(row);
    });

    const subtotal = Object.entries(state.cart).reduce((t,[id,qty]) => {
      const p = byId(Number(id));
      return t + p.price*qty;
    },0);

    const delivery = DELIVERY_FEES[state.location] || 0;
    const total = subtotal + delivery;
    qs('#subtotal').textContent = money(subtotal);
    qs('#delivery').textContent = money(delivery);
    qs('#total').textContent = money(total);
  }

  function updateOpenStatus() {
    const now = new Date();
    const h = now.getHours();
    const open = (h >= 18 && h < 23);
    const badge = qs('#openBadge');
    badge.textContent = open ? 'Aberto' : 'Fechado';
    badge.className = `badge ${open?'open':'closed'}`;
    qs('#hoursText').textContent = '18h √†s 23h';
    return open;
  }

  function gerarPix(nome, chave, descricao, valor, id){
      return `00020126680014BR.GOV.BCB.PIX0114${chave}520400005303986540${valor.toFixed(2).replace('.',',')}5802BR5913${nome}6009Requinte62070503***6304ABCD`;
  }

  function checkout() {
    if (!updateOpenStatus()) return alert('Estamos fora do hor√°rio de atendimento!');
    if (Object.keys(state.cart).length === 0) return alert('Carrinho vazio!');
    let items = Object.entries(state.cart).map(([id,qty])=>{
      const p = byId(Number(id));
      return `‚Ä¢ ${qty}√ó ${p.name} = ${money(p.price*qty)}`;
    }).join('\n');
    const subtotal = Object.entries(state.cart).reduce((t,[id,qty])=>t+byId(Number(id)).price*qty,0);
    const delivery = DELIVERY_FEES[state.location] || 0;
    const total = subtotal + delivery;
    let text = `Novo Pedido \n\n${items}\n\nSubtotal: ${money(subtotal)}\nEntrega: ${money(delivery)}\n*Total: ${money(total)}*\n\n Local: ${state.location}`;
    if (state.location !== 'RETIRADA') text += `\nEndere√ßo: ${state.address}`;
    if (state.time) text += `\n‚è∞ Hor√°rio: ${state.time}`;
    
    if(state.payment === 'Pix'){
        text += `\n Pagamento: Pix\nC√≥digo Pix:\n${qs('#pixCode').value}`;
    } else {
        text += `\n Pagamento: ${state.payment}`;
        if (state.payment === 'Dinheiro' && state.troco) text += ` (Troco para ${state.troco})`;
    }

    const url = 'https://wa.me/5549999588244?text=' + encodeURIComponent(text);
    window.open(url,'_blank');
  }

  function init() {
    renderFilters();
    renderMenu();
    renderCart();
    updateOpenStatus();

    qs('#locationSelect').value = state.location;
    qs('#addressInput').value = state.address;
    qs('#timeInput').value = state.time;
    qs('#paymentSelect').value = state.payment;
    qs('#trocoInput').value = state.troco;
    qs('#trocoInput').style.display = state.payment === 'Dinheiro' ? 'block':'none';

    qs('#locationSelect').onchange = e => { state.location = e.target.value; saveState(); renderCart(); };
    qs('#addressInput').oninput = e => { state.address = e.target.value; saveState(); };
    qs('#timeInput').oninput = e => { state.time = e.target.value; saveState(); };

    qs('#paymentSelect').onchange = e => {
        state.payment = e.target.value; 
        saveState();
        
        qs('#trocoInput').style.display = state.payment === 'Dinheiro' ? 'block' : 'none';
        const pixCode = qs('#pixCode');
        const copyPixBtn = qs('#copyPixBtn');
        
        pixCode.style.display = state.payment === 'Pix' ? 'block' : 'none';
        copyPixBtn.style.display = state.payment === 'Pix' ? 'block' : 'none';
        
        if(state.payment === 'Pix') {
            const subtotal = Object.entries(state.cart).reduce((t,[id,qty]) => t + byId(Number(id)).price*qty,0);
            const delivery = DELIVERY_FEES[state.location] || 0;
            const total = subtotal + delivery;
            const chave = "brunofrigo092@gmail.com"; // sua chave Pix
            pixCode.value = gerarPix("Requinte Bar", chave, "Pedido", total, "REQ123");
        }
    };

    qs('#trocoInput').oninput = e => { 
      let raw = e.target.value.replace(/\D/g, '');
      if (raw) {
        const valor = parseFloat(raw) / 100;
        state.troco = BRL.format(valor);
        e.target.value = state.troco;
      } else {
        state.troco = '';
      }
      saveState();
    };

    qs('#copyPixBtn').onclick = () => {
      const pixCode = qs('#pixCode');
      navigator.clipboard.writeText(pixCode.value)
        .then(() => alert('C√≥digo Pix copiado!'))
        .catch(() => alert('Erro ao copiar o c√≥digo Pix!'));
    };

    qs('#checkoutBtn').onclick = checkout;
    qs('#clearBtn').onclick = () => { Object.assign(state,{cart:{},address:'',time:'',payment:'Dinheiro',troco:''}); saveState(); renderCart(); };
    qs('#emptyBtn').onclick = () => { state.cart = {}; saveState(); renderCart(); };
    setInterval(updateOpenStatus, 60000);
  }
  init();
  </script>
</body>
</html>